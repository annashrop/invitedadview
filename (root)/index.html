<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ad Approval Portal</title>
  <style>
    body { font-family: Arial; background: #f4f4f4; padding: 20px; }
    h2 { color: #22326e; }
    .card {
      background: white; border-radius: 8px; padding: 16px; margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    img { max-width: 100%; height: auto; border-radius: 4px; margin-bottom: 10px; }
    .btn-group button {
      margin-right: 8px;
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .approve { background: #4CAF50; color: white; }
    .needs-edit { background: #f44336; color: white; }
    textarea { width: 100%; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Upload Ad CSV File</h2>
  <input type="file" id="csvUpload" accept=".csv"><br><br>
  <div id="adContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    document.getElementById('csvUpload').addEventListener('change', function(e) {
      Papa.parse(e.target.files[0], {
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
          const data = results.data;
          const container = document.getElementById('adContainer');
          container.innerHTML = '';

          data.forEach((row, index) => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerHTML = `
              <img src="${row.Image_url_1}" onerror="this.style.display='none'">
              <h3>${row.Headline}</h3>
              <p><strong>${row.Club}</strong> - ${row.Category}</p>
              <p>${row.Primary_Text}</p>
              <div class="btn-group">
                <button class="approve">Approve</button>
                <button class="needs-edit">Needs Edit</button>
              </div>
              <textarea placeholder="Add a comment..."></textarea>
            `;
            const buttons = div.querySelectorAll('button');
            const commentBox = div.querySelector('textarea');

            buttons.forEach(btn => {
              btn.addEventListener('click', () => {
                const status = btn.classList.contains('approve') ? 'Approved' : 'Needs Edit';
                const comment = commentBox.value;
                const adData = {
                  club: row.Club,
                  headline: row.Headline,
                  status,
                  comment
                };
                localStorage.setItem(`ad_${index}`, JSON.stringify(adData));
                btn.parentElement.innerHTML += ` <strong>${status}</strong>`;
              });
            });

            container.appendChild(div);
          });
        }
      });
    });
  </script>
</body>
</html>
 
